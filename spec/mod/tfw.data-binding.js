require("tfw.data-binding",function(n,e){function r(){return i(o,arguments)}function t(e,r,t,o){var i="function"==typeof o;"undefined"==typeof r[f]&&(r[f]={}),r[f][t]={value:o,event:new u};var a;a="function"==typeof e?function(n){n=e(n),(i||r[f][t].value!==n)&&(r[f][t].value=n,r[f][t].event.fire(n,r,t))}:function(n){(i||r[f][t].value!==n)&&(r[f][t].value=n,r[f][t].event.fire(n,r,t))};var l=o;return i||(l=function(){return r[f][t].value}),Object.defineProperty(r,t,{get:l,set:a,configurable:!1,enumerable:!0}),n.bind.bind(n,r,t)}var o={en:{}},i=require("$").intl;require("polyfill.string");var a=require("dom"),u=require("tfw.listeners"),f="_tfw.data-binding_",l={castArray:function(n){return Array.isArray(n)?n:[n]},castBoolean:function(n){if("boolean"==typeof n)return n;if("string"==typeof n){if(n=n.trim().toLowerCase(),"1"==n||"true"==n||"yes"==n)return!0;if("0"==n||"false"==n||"no"==n)return!1}return"number"==typeof n?!!n:null},castColor:function(n){return""+n},castEnum:function(n){var e=n.map(String.toLowerCase);return function(r){if("number"==typeof r)return n[Math.floor(r)%n.length];if("string"!=typeof r)return n[0];var t=e.indexOf(r.trim().toLowerCase());return t<0&&(t=0),n[t]}},castInteger:function(n){return"number"==typeof n?Math.floor(n):"boolean"==typeof n?n?1:0:"string"==typeof n?parseInt(n):Number.NaN},castString:function(n){return"string"==typeof n?n:void 0===n||null===n?"":JSON.stringify(n)},castStringArray:function(n){return Array.isArray(n)?n:"string"==typeof n?n.split(",").map(String.trim):[JSON.stringify(n)]},castUnit:function(n){return""+n},castValidator:function(n){if("function"==typeof n)return n;if("boolean"==typeof n)return function(){return n};if("string"==typeof n&&0!=n.trim().length)try{var e=new RegExp(n);return e.test.bind(e)}catch(e){console.error("[castValidator] /"+n+"/ ",e)}return function(){return null}}};n.fire=function(n,e,r){var t=n[e];"undefined"==typeof r&&(r=t),n[f][e].value=r,n[f][e].event.fire(n[e],n,e)},n.set=function(n,e,r){n[f][e].value=r},n.prop=t.bind(null,null),n.propToggleClass=function(n,e,r,o){"string"!=typeof o&&(o="");var i={};"string"==typeof r?i[r]=r:Array.isArray(r)?r.forEach(function(n){i[n]=n}):i=r,t(null,n,e)(function(e){var r,t;for(r in i)t=i[r],r==e?a.addClass(n.element,o+t):a.removeClass(n.element,o+t)})},n.propAddClass=function(n,e,r){"undefined"==typeof r&&(r=e),t(l.castBoolean,n,e)(function(e){e?a.addClass(n.element,r):a.removeClass(n.element,r)})},n.propRemoveClass=function(n,e,r){"undefined"==typeof r&&(r=e),t(l.castBoolean,n,e)(function(e){e?a.removeClass(n.element,r):a.addClass(n.element,r)})},n.propArray=t.bind(null,l.castArray),n.propBoolean=t.bind(null,l.castBoolean),n.propColor=t.bind(null,l.castColor),n.propEnum=function(n){return t.bind(null,l.castEnum(n))},n.propInteger=t.bind(null,l.castInteger),n.propString=t.bind(null,l.castString),n.propStringArray=t.bind(null,l.castStringArray),n.propUnit=t.bind(null,l.castUnit),n.propValidator=t.bind(null,l.castValidator),n.bind=function(n,e,r,t,o){if("undefined"==typeof n[f]||"undefined"==typeof n[f][e])throw console.error(e+" is not a bindable property of ",n),Error(e+" is not a bindable property!");"undefined"==typeof o&&(o={});var i="function"==typeof r?r:function(n,e,i){r[t]="function"==typeof o.converter?o.converter(n):n};return n[f][e].event.add(i),o},n.extend=function(n,e,r){var t,o,i=JSON.parse(JSON.stringify(n));for(t in e)"$"!=t.charAt(0)&&(o=e[t],"undefined"==typeof i[t]?console.error("[tfw.data-binding.extend] Undefined argument: `"+t+"`!"):i[t]=o);if("undefined"!=typeof r){for(t in e)"$"==t.charAt(0)&&Object.defineProperty(r,t,{value:e[t],writable:!1,configurable:!1,enumerable:!1});for(t in i)"$"!=t.charAt(0)&&(r[t]=i[t])}return i},n.converters=l,e.exports._=r});
//# sourceMappingURL=tfw.data-binding.js.map