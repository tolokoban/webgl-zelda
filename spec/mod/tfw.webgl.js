require("tfw.webgl",function(e,t){function r(){return T(m,arguments)}function i(e,t){this.gl=e;var r=e.createProgram();e.attachShader(r,u(e,t.vert||"//No Vertex Shader")),e.attachShader(r,c(e,t.frag||"//No Fragment Shader")),e.linkProgram(r),this.program=r,Object.freeze(this.program),this.use=function(){e.useProgram(r)},this.use();var i,s,m={},T=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES);for(i=0;i<T;i++)s=a(e,e.getActiveAttrib(r,i)),m[s.name]=e.getAttribLocation(r,s.name),this["$"+s.name]=e.getAttribLocation(r,s.name),this["_$"+s.name]=s;Object.freeze(m),this.attribs=m;var f={},h=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(i=0;i<h;i++)s=a(e,e.getActiveUniform(r,i)),f[s.name]=e.getUniformLocation(r,s.name),Object.defineProperty(this,"$"+s.name,{set:n(e,s,f[s.name]),get:o(s),enumerable:!0,configurable:!0});Object.freeze(f),this.uniforms=f}function a(e,t){switch(t.dim=1,t.type){case e.FLOAT_VEC2:t.dim=2;break;case e.FLOAT_VEC3:t.dim=3;break;case e.FLOAT_VEC4:t.dim=4;break;case e.FLOAT_MAT2:t.dim=4;break;case e.FLOAT_MAT3:t.dim=9;break;case e.FLOAT_MAT4:t.dim=16}return t}function n(e,t,r){var i="_$"+t.name;switch(t.type){case e.BYTE:case e.UNSIGNED_BYTE:case e.SHORT:case e.UNSIGNED_SHORT:case e.INT:case e.UNSIGNED_INT:return 1==t.size?function(t){e.uniform1i(r,t),this[i]=t}:function(t){e.uniform1iv(r,t),this[i]=t};case e.FLOAT:return 1==t.size?function(t){e.uniform1f(r,t),this[i]=t}:function(t){e.uniform1fv(r,t),this[i]=t}}}function o(e){var t="_$"+e.name;return function(){return this[t]}}function s(e,t,r){var i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(console.log(r),console.error("An error occurred compiling the shader: "+t.getShaderInfoLog(i)),null)}function c(e,t){return s(e.FRAGMENT_SHADER,e,t)}function u(e,t){return s(e.VERTEX_SHADER,e,t)}var m={en:{}},T=require("$").intl,f=require("tfw.message"),h=function(e){Object.defineProperty(this,"canvas",{value:e,writable:!1,configurable:!1,enumerable:!0}),Object.defineProperty(this,"gl",{value:e.getContext("webgl")||e.getContext("experimental-webgl"),writable:!1,configurable:!1,enumerable:!0}),this.render=function(){}};h.prototype.start=function(e){if("function"==typeof e&&(this.render=e),!this._animationIsOn){var t=this,r=0,i=function(e){t._animationIsOn&&window.requestAnimationFrame(i),t.render(e,e-r),r=e};window.requestAnimationFrame(i),this._animationIsOn=!0}f.info("<html>Utilisez les <b>flèches</b> pour changer l'angle de la <b>caméra</b>.<br/>Et <b>+ et -</b> pour zoomer.")},h.prototype.stop=function(){this._animationIsOn=!1};var E=(new Float32Array).BYTES_PER_ELEMENT;i.prototype.enableVertexAttribFloat32Array=function(){var e,t,r,i=0;for(e=0;e<arguments.length;e++){if(t=arguments[e],r=this["_$"+t],"undefined"==typeof r)throw console.log("Existing attribute are:",this.attribs),Error('Attribute not defined: "'+t+'"!');i+=r.size*r.dim}var a=0;for(e=0;e<arguments.length;e++)t=arguments[e],r=this["_$"+t],this.gl.enableVertexAttribArray(this.attribs[t]),this.gl.vertexAttribPointer(this.attribs[t],r.size*r.dim,this.gl.FLOAT,!1,i*E,a*E),a+=r.size*r.dim;return i};var g=function(e,t,r){var i=e.createTexture();return e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,r,0,e.RGBA,e.UNSIGNED_BYTE,null),i},b=function(e){var t=e.width,r=e.height,i=document.createElement("canvas");i.setAttribute("width",t),i.setAttribute("height",r);var a=i.getContext("2d");return a.drawImage(e,0,0),a.getImageData(0,0,t,r).data};e.Renderer=h,e.Program=i,e.createTextureForFB=g,e.getDataFromImage=b,t.exports._=r});
//# sourceMappingURL=tfw.webgl.js.map