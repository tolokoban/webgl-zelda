require("wdg.combo",function(e,t){function n(){return l(o,arguments)}function i(e,t,n){var i=this;r.on(t,{down:function(){window.setTimeout(function(){r.addClass(t,"theme-elevation-4")})},up:function(){r.removeClass(t,"theme-elevation-4")},tap:function(){console.log("Select: ",e),n(),i.value=e}})}var o={en:{}},l=require("$").intl,r=require("dom"),a=require("tfw.data-binding"),d=require("wdg.icon"),s=require("wdg.modal"),u=require("wdg.button"),c=function(e){var t=this;this._children={};var n=r.div("theme-label","theme-color-bg-1"),i=r.div("button","theme-color-bg-1",[new d({content:"tri-down",size:"1.5rem"})]),o=r.tag("button","body"),l=r.div("datalist");this._button=i;var s=r.elem(this,"div","wdg-combo","theme-elevation-2",[n,r.div("table",[o,i]),l]);o.addEventListener("focus",function(){r.addClass(s,"theme-elevation-8")}),o.addEventListener("blur",function(){r.removeClass(s,"theme-elevation-8")}),a.propRemoveClass(this,"enabled","disabled"),a.propBoolean(this,"focus")(function(e){e?o.focus():o.blur()}),a.propString(this,"label")(function(e){null===e||"string"==typeof e&&""==e.trim()?r.addClass(s,"no-label"):(r.removeClass(s,"no-label"),r.textOrHtml(n,e),"<html>"==e.substr(0,6)?r.att(n,{title:""}):r.att(n,{title:e}))}),a.prop(this,"content")(function(e){if(Array.isArray(e)){var n={};e.forEach(function(e,t){"undefined"!=typeof e.$key&&(n[e.$key]=e)}),e=n}t._children=e,a.fire(t,"value")}),a.propString(this,"value")(function(e){var n=t._children[e];if("undefined"==typeof n){for(e in t._children)break;n=t._children[e]}r.clear(o),n&&r.add(o,n)}),a.propAddClass(this,"wide"),a.propRemoveClass(this,"visible","hide"),e=a.extend({value:"",content:[],label:null,enabled:!0,wide:!1,visible:!0},e,this),r.on(s,t.fire.bind(t))};c.prototype.fire=function(){function e(){c.visible=!1,document.body.removeChild(c.element)}var t=[];if("string"==typeof this.label){var o=r.div("theme-label","theme-color-bg-1");r.textOrHtml(o,this.label),t.push(o)}var l=r.tag("ul","wdg-combo-modal","theme-color-bg-B0");t.push(l);var d=new u({icon:"cancel",text:n("cancel"),type:"simple"});t.push(d);var c=new s({content:t,wide:!1});document.body.appendChild(c.element),c.visible=!0,a.bind(d,"action",e);var h,v,f;for(h in this._children)h!=this.value&&(v=this._children[h],"function"==typeof v.element?v=v.element():"undefined"!=typeof v.element&&(v=v.element),f=r.tag("li","theme-elevation-0",[v]),r.add(l,f),i.call(this,h,f,e))},c.toArray=function(e){var t,n,i,o=[];for(t in e)n=e[t],"string"==typeof n&&(i=document.createElement("div"),i.textContent=n,n=i),n.$key=t,o.push(n);return o},t.exports=c,t.exports._=n});
//# sourceMappingURL=wdg.combo.js.map